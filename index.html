<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>成分表示 - 『つくる』の軌跡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="1984年から続く9業種の成分表示。『つくる』の軌跡を視覚化したプロフィールアーカイブ。" />
  <meta name="color-scheme" content="light" />

  <style>
    *, *::before, *::after {
      box-sizing: border-box;
    }

    :root {
      color-scheme: light;
    }

    html {
      font-size: 18px;
      scroll-behavior: smooth;
      background: linear-gradient(to bottom, #e5e7eb, #f9fafb);
    }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont,
        "Segoe UI", "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif;
      background: transparent;
      color: #111827;
      line-height: 1.8;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

header {
  background: #696969;        /* ← ここだけ変更 */
  color: #e5e7eb;
  backdrop-filter: blur(10px);
  position: sticky;
  top: 0;
  z-index: 50;
  border-bottom: 1px solid #4b5563;  /* 少し柔らかいグレーのラインに */
}

    .header-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 1.5rem;
    }

    .site-title {
      font-size: 1.1rem;
      font-weight: 700;
      letter-spacing: 0.14em;
      text-transform: uppercase;
    }

    nav ul {
      list-style: none;
      display: flex;
      gap: 1.2rem;
      margin: 0;
      padding: 0;
      font-size: 0.95rem;
    }

    nav a {
      opacity: 0.9;
      color: #e5e7eb;
    }

    nav a:hover {
      opacity: 1;
      text-decoration: none;
      border-bottom: 2px solid #38bdf8;
      padding-bottom: 0.12rem;
    }

    section {
      padding: 3.5rem 0 3rem;
    }

    section:nth-of-type(odd) {
      background: #f9fafb;
    }

    section:nth-of-type(even) {
      background: #f3f4f6;
    }

    h1, h2, h3, h4 {
      margin: 0 0 0.5rem;
      font-weight: 700;
      color: #111827;
    }

    h1 {
      font-size: 1.9rem;
      letter-spacing: 0.03em;
    }

    h2 {
      font-size: 1.5rem;
      margin-bottom: 1.2rem;
      border-left: 4px solid #0ea5e9;
      padding-left: 0.6rem;
      padding-right: 0.4rem;
      background: linear-gradient(
        90deg,
        rgba(14, 165, 233, 0.08),
        rgba(249, 250, 251, 0)
      );
      border-radius: 4px;
    }

    h3 {
      font-size: 1.12rem;
    }

    p {
      margin: 0.3rem 0 0.7rem;
      color: #374151;
    }

    .muted {
      font-size: 0.85rem;
      color: #6b7280;
    }

    .hero {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
    }

    .hero-main {
      background: radial-gradient(circle at top left, #f9fafb, #e5e7eb);
      border-radius: 18px;
      padding: 2rem 1.8rem;
      border: 1px solid #d4d4d8;
      box-shadow: 0 20px 45px rgba(15, 23, 42, 0.12);
      color: #111827;
    }

    .hero-subtitle {
      font-size: 1.3rem;
      font-weight: 600;
      color: #4b5563;
      margin-bottom: 0.6rem;
    }

    .hero-catch {
      font-size: 0.85rem;
      margin-top: 0.4rem;
      color: #4b5563;
      opacity: 0.95;
    }

    .hero-meta {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 0.75rem;
      margin-top: 1.5rem;
      align-items: stretch;
    }

    .hero-stat {
      padding: 0.55rem 0.85rem;
      border-radius: 999px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid #d4d4d8;
      box-shadow: 0 6px 16px rgba(15, 23, 42, 0.08);
    }

    .hero-stat-label {
      font-size: 0.7rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: #6b7280;
      margin-bottom: 0.1rem;
    }

    .hero-stat-value {
      font-size: 0.98rem;
      font-weight: 600;
      color: #111827;
    }

    .card {
      background: #ffffff;
      border-radius: 16px;
      padding: 1.4rem 1.3rem 1.5rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
      will-change: transform, box-shadow;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 55px rgba(15, 23, 42, 0.13);
    }

    .chart-layout {
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2.5fr);
      gap: 1.8rem;
      margin-bottom: 2rem;
    }

    .chart-container {
      position: relative;
      width: 100%;
      height: 320px;
    }

    .table-scroll {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.9rem;
      background: #ffffff;
    }

    th, td {
      padding: 0.55rem 0.6rem;
      text-align: left;
      border-bottom: 1px solid #e5e7eb;
      white-space: nowrap;
    }

    th {
      background: #f3f4f6;
      color: #111827;
    }

    tbody tr:nth-child(odd) {
      background: #ffffff;
    }

    tbody tr:nth-child(even) {
      background: #f9fafb;
    }

    .list-toggle {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.2rem 0;
      background: transparent;
      border: none;
      color: #111827;
      font-size: 1.02rem;
      font-weight: 600;
      text-align: left;
      cursor: pointer;
    }

    .list-toggle span {
      pointer-events: none;
    }

    .list-toggle-indicator {
      font-size: 1.2rem;
      line-height: 1;
      color: #6b7280;
    }

    .list-toggle:hover .list-toggle-indicator {
      color: #111827;
    }

    .list-panel {
      margin-top: 0.6rem;
    }

    .career-link {
      color: inherit;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
    }

    .career-link:hover {
      text-decoration: underline;
    }

    .career-color-dot {
      display: inline-block;
      width: 0.7rem;
      height: 0.7rem;
      border-radius: 999px;
      margin-right: 0.4rem;
      border: 1px solid rgba(15, 23, 42, 0.4);
      flex-shrink: 0;
    }

    .timeline {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .timeline-item {
      position: relative;
      background: #ffffff;
      border-radius: 14px;
      padding: 1.1rem 1.2rem;
      border: 1px solid #e5e7eb;
      box-shadow: 0 16px 40px rgba(15, 23, 42, 0.08);
      scroll-margin-top: 88px;
      will-change: transform, box-shadow;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .timeline-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 22px 55px rgba(15, 23, 42, 0.13);
    }

    .timeline-item-accent {
      overflow: hidden;
    }

    .timeline-item-accent::before {
      content: "";
      position: absolute;
      left: 0;
      right: 0;
      top: 0;
      height: 3px;
    }

    .timeline-item-food {
      border-color: rgba(56, 189, 248, 0.45);
    }
    .timeline-item-food::before {
      background: linear-gradient(90deg, #36aee4, rgba(54, 174, 228, 0));
    }

    .timeline-item-system {
      border-color: rgba(168, 85, 247, 0.45);
    }
    .timeline-item-system::before {
      background: linear-gradient(90deg, #9b4ae0, rgba(155, 74, 224, 0));
    }

    .timeline-item-store {
      border-color: rgba(249, 115, 22, 0.45);
    }
    .timeline-item-store::before {
      background: linear-gradient(90deg, #f18324, rgba(241, 131, 36, 0));
    }

    .timeline-item-retail {
      border-color: rgba(34, 197, 94, 0.45);
    }
    .timeline-item-retail::before {
      background: linear-gradient(90deg, #1fa857, rgba(31, 168, 87, 0));
    }

    .timeline-item-finance {
      border-color: rgba(225, 29, 72, 0.45);
    }
    .timeline-item-finance::before {
      background: linear-gradient(90deg, #d81e4a, rgba(216, 30, 74, 0));
    }

    .timeline-item-wood {
      border-color: rgba(250, 204, 21, 0.55);
    }
    .timeline-item-wood::before {
      background: linear-gradient(90deg, #e7b814, rgba(231, 184, 20, 0));
    }

    .timeline-item-light {
      border-color: rgba(14, 165, 233, 0.5);
    }
    .timeline-item-light::before {
      background: linear-gradient(90deg, #0d9ad8, rgba(13, 154, 216, 0));
    }

    .timeline-item-auto {
      border-color: rgba(139, 92, 246, 0.5);
    }
    .timeline-item-auto::before {
      background: linear-gradient(90deg, #7e54e0, rgba(126, 84, 224, 0));
    }

    .timeline-item-azen {
      border-color: rgba(249, 115, 115, 0.6);
    }
    .timeline-item-azen::before {
      background: linear-gradient(90deg, #f26a6a, rgba(242, 106, 106, 0));
    }

    .timeline-period {
      font-size: 0.9rem;
      color: #6b7280;
    }

    .timeline-desc {
      font-size: 0.92rem;
      color: #374151;
    }

    .timeline-header {
      position: relative;
      padding-right: 1.4rem;
      cursor: pointer;
    }

    .timeline-header p {
      margin: 0.1rem 0;
    }

    .timeline-meta {
      font-size: 0.9rem;
      color: #4b5563;
    }

    .timeline-item-accent .timeline-title {
      font-size: 1.18rem;
      font-weight: 700;
    }

    .timeline-item-accent .timeline-meta:first-of-type {
      font-weight: 500;
    }

    .timeline-item-food   .timeline-meta:first-of-type { color: #0ea5e9; }
    .timeline-item-system .timeline-meta:first-of-type { color: #a855f7; }
    .timeline-item-store  .timeline-meta:first-of-type { color: #f97316; }
    .timeline-item-retail .timeline-meta:first-of-type { color: #22c55e; }
    .timeline-item-finance .timeline-meta:first-of-type { color: #e11d48; }
    .timeline-item-wood   .timeline-meta:first-of-type { color: #ca8a04; }
    .timeline-item-light  .timeline-meta:first-of-type { color: #0ea5e9; }
    .timeline-item-auto   .timeline-meta:first-of-type { color: #8b5cf6; }
    .timeline-item-azen   .timeline-meta:first-of-type { color: #f97373; }

    .timeline-item-accent .timeline-meta:last-of-type {
      font-style: italic;
      opacity: 0.95;
    }

    .timeline-body {
      margin-top: 0.7rem;
      padding-top: 0.6rem;
      border-top: 1px solid #e5e7eb;
    }

    .timeline-body .timeline-desc + .timeline-desc {
      margin-top: 0.7rem;
      padding-top: 0.6rem;
      border-top: 1px dashed rgba(148, 163, 184, 0.55);
    }

    .timeline-indicator {
      position: absolute;
      right: 0.1rem;
      top: 0.3rem;
      font-size: 1.1rem;
      color: #9ca3af;
    }

    .timeline-collapsible.is-open .timeline-indicator {
      color: #4b5563;
    }

    .timeline-header:focus-visible {
      outline: 2px solid #0ea5e9;
      outline-offset: 2px;
      border-radius: 4px;
    }

    .grid-products {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 1.4rem;
    }

    .product-card p {
      font-size: 0.92rem;
      color: #374151;
    }

    .product-card ul {
      margin: 0.4rem 0 0.2rem;
      padding-left: 1.2rem;
    }

    .product-card li {
      margin: 0.15rem 0;
    }

    .product-note {
      font-size: 0.75rem;
      font-weight: 400;
      color: #6b7280;
      margin-left: 0.3rem;
    }

    #california-roll .product-header p {
      font-size: 0.85rem;
      color: #4b5563;
    }

    .product-card-collapsible {
      position: relative;
      padding-right: 2.4rem;
    }

    .product-header {
      position: relative;
      cursor: pointer;
    }

    .product-header:focus-visible {
      outline: 2px solid #0ea5e9;
      outline-offset: 4px;
      border-radius: 4px;
    }

    .product-body {
      margin-top: 0.7rem;
      padding-top: 0.6rem;
      border-top: 1px solid #e5e7eb;
      font-size: 0.9rem;
    }

    .product-indicator {
      position: absolute;
      right: 0.2rem;
      top: 0.1rem;
      font-size: 1.2rem;
      color: #9ca3af;
    }

    .product-card-collapsible.is-open .product-indicator {
      color: #4b5563;
    }

    .product-divider {
      margin: 0.9rem 0;
      border-top: 1px dashed rgba(148, 163, 184, 0.55);
    }

    .product-body-title,
    .product-body-emphasis {
      font-weight: 600;
      font-size: 1rem;
      color: #111827;
    }

    .fade-in-up {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.7s ease, transform 0.7s ease;
    }

    .fade-in-up.is-visible {
      opacity: 1;
      transform: translateY(0);
    }

    footer {
      background: #e5e7eb;
      color: #4b5563;
      padding: 1.4rem 0;
      text-align: center;
      font-size: 0.85rem;
      border-top: 1px solid #d1d5db;
    }

    @media (max-width: 900px) {
      .chart-layout {
        grid-template-columns: minmax(0, 1fr);
      }
      .grid-products {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    @media (max-width: 720px) {
      .header-inner {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.4rem;
      }
      nav ul {
        flex-wrap: wrap;
        gap: 0.7rem;
      }
      section {
        padding: 2.8rem 0 2.4rem;
      }
      .hero-main {
        padding: 1.6rem 1.4rem;
      }
    }

    @media (max-width: 480px) {
      html {
        font-size: 17px;
      }
      h1 {
        font-size: 1.6rem;
      }
      h2 {
        font-size: 1.35rem;
      }
      .chart-container {
        height: 260px;
      }
    }

    @media (prefers-reduced-motion: reduce) {
      html {
        scroll-behavior: auto;
      }
      *, *::before, *::after {
        animation-duration: 0.001ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.001ms !important;
      }
      .fade-in-up {
        opacity: 1 !important;
        transform: none !important;
      }
    }

#intro h1 {
  font-size: 2.1rem;
  letter-spacing: 0.04em;
}

#intro .hero-subtitle {
  font-size: 1.2rem;
  font-weight: 500;
  color: #4b5563;
}

#intro .hero-main {
  background: radial-gradient(circle at top left, #fefefe, #e5e7eb);
  border-radius: 20px;
  padding: 2.2rem 2rem;
  border: 1px solid #e5e7eb;
  box-shadow: 0 18px 40px rgba(15, 23, 42, 0.10);
}

h2 {
  border-left: 4px solid #0284c7;
  background: linear-gradient(
    90deg,
    rgba(2, 132, 199, 0.08),
    rgba(249, 250, 251, 0)
  );
}

header nav a:hover {
  border-bottom-color: #0284c7;
}

.card {
  padding: 1.6rem 1.5rem 1.7rem;
  border-radius: 18px;
  box-shadow: 0 18px 45px rgba(15, 23, 42, 0.10);
}

.card h3 {
  font-size: 1.05rem;
  letter-spacing: 0.04em;
  margin-bottom: 0.7rem;
}

.product-card p {
  font-size: 0.9rem;
  line-height: 1.8;
}

.timeline-desc {
  font-size: 0.9rem;
  line-height: 1.85;
}

#intro .hero-main {
  max-width: 760px;
  margin: 0 auto;
}

#intro .hero-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1.1rem;
}

#intro .hero-stat {
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.95);
  border: 1px solid #d4d4d8;
  box-shadow: 0 10px 24px rgba(15, 23, 42, 0.10);
  min-width: 210px;
}

#intro .hero-stat-label {
  font-size: 0.7rem;
  letter-spacing: 0.16em;
  text-transform: uppercase;
  color: #6b7280;
  margin-bottom: 0.1rem;
}

#intro .hero-stat-value {
  font-size: 0.98rem;
  font-weight: 600;
  color: #111827;
}

#intro {
  padding-top: 2.4rem;
  padding-bottom: 2.7rem;
}

#intro h1 {
  font-size: 2.05rem;
  letter-spacing: 0.04em;
}

#intro .hero-subtitle {
  font-size: 1.18rem;
  font-weight: 500;
  margin-bottom: 0.4rem;
}

#intro .hero-catch {
  margin-top: 0.3rem;
  margin-bottom: 0.1rem;
}

html {
  background: #e5e7eb;
}

section:nth-of-type(odd) {
  background: #f3f4f6;
}

section:nth-of-type(even) {
  background: #e5e7eb;
}

.card {
  background: #f9fafb;
}

footer {
  background: #696969;        /* ← ここだけ変更 */
  color: #e5e7eb;
  border-top: 1px solid #4b5563;
}

footer a {
  color: inherit;
  text-decoration: underline;
}

#intro .hero-stat-value {
  margin-top: 0.05rem;
}

#intro {
  padding-top: 2rem;
  padding-bottom: 2.4rem;
}

#intro .hero-main {
  padding: 1.6rem 1.8rem 1.4rem;
}

.tagline-like {
  font-style: italic;
  color: #0369a1;
  letter-spacing: 0.06em;
}

.section-header {
  margin-bottom: 0.6rem;
}

.section-label {
  font-size: 0.7rem;
  letter-spacing: 0.18em;
  text-transform: uppercase;
  color: #9ca3af;
  margin: 0 0 0.1rem;
}

section {
  padding: 3.2rem 0 2.8rem;
  border-top: 1px solid rgba(148, 163, 184, 0.4);
}

section#intro {
  border-top: none;
}

#intro h1 {
  font-size: 2.1rem;
  letter-spacing: 0.12em;
  text-transform: uppercase;
}

.site-title {
  letter-spacing: 0.18em;
}

#intro h1 {
  margin-bottom: 0.1rem;
  line-height: 1.25;
}

#intro .hero-subtitle {
  margin-top: 0;
  margin-bottom: 0.2rem;
  line-height: 1.3;
}

#intro .hero-meta {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  align-items: center;
  justify-content: flex-start;
  margin-top: 0.9rem;
  padding: 0.6rem 0.9rem;
  border-radius: 14px;
  background: rgba(255, 255, 255, 0.96);
  border: 1px solid #d4d4d8;
  box-shadow: 0 14px 32px rgba(15, 23, 42, 0.12);
}

#intro .hero-stat {
  background: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  min-width: 0;
}

#intro .hero-stat-value {
  font-size: 1.02rem;
  font-weight: 600;
}

#overview h3 {
  margin-bottom: 0.15rem;
}

#overview h3 + .muted {
  margin-top: 0.05rem;
}

#activities ul {
  margin: 0.3rem 0 0;
  padding-left: 0;
  list-style: none;
  font-size: 0.88rem;
  color: #4b5563;
}

#activities li {
  margin: 0.08rem 0;
  padding-left: 1.1rem;
  position: relative;
}

#activities li::before {
  content: "・";
  position: absolute;
  left: 0;
  top: 0.1rem;
  font-size: 0.8rem;
  color: #9ca3af;
}

#intro .hero-tagline {
  font-size: 0.9rem;
  color: #4b5563;
  margin: 0 0 0.15rem;
}

#intro .hero-title-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
  align-items: baseline;
  margin-top: 0.05rem;
}

#intro .hero-title-row h1 {
  margin: 0;
}

#intro .hero-title-row .hero-subtitle {
  margin: 0;
}

.section-hint {
  margin-top: -0.1rem;
  margin-bottom: 0.9rem;
  font-size: 0.8rem;
  color: #9ca3af;
}

.toggle-hint {
  font-size: 0.8rem;
  color: #9ca3af;
}

#intro .hero-main {
  margin-left: 0;
  margin-right: auto;
  text-align: left;
}

#intro .hero-title-row h1 {
  font-size: 1.9rem;
  font-weight: 600;
  letter-spacing: 0.06em;
}

#intro .hero-title-row .hero-subtitle {
  font-size: 1rem;
  font-weight: 400;
  color: #6b7280;
}

#california-roll h3 {
  font-style: italic;
  letter-spacing: 0.06em;
}

#intro .hero-title-row h1 {
  font-size: 1.5rem;
  font-weight: 500;
  color: #111827;
  letter-spacing: 0.02em;
  text-transform: none;
}
    
#message .purpose-main {
  font-size: 0.98rem;
  font-weight: 500;
  color: #111827;
  margin-top: 0.2rem;
  margin-bottom: 0.8rem;
}

.purpose-main {
  font-size: 1.05rem;
  font-weight: 600;
  margin-top: 0.2rem;
  margin-bottom: 0.2rem;
}

.purpose-sub-en {
  margin-top: 0;
  margin-bottom: 0.3rem;
  font-size: 0.9rem;
  font-weight: 600;
  font-style: italic;
  letter-spacing: 0.06em;
  color: #0369a1;
  line-height: 0.8;
}

.purpose-desc {
  font-size: 0.9rem;
  color: #4b5563;
  margin-top: 0.2rem;
  margin-bottom: 0.8rem;
}

#message .purpose-main {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
  line-height: 1.8 !important;
}

#message .purpose-sub-en {
  margin-top: 0 !important;
  margin-bottom: 0.7rem !important;
  line-height: 1.8 !important;
  font-size: 0.9rem;
  font-weight: 600 !important;
  font-style: italic;
  letter-spacing: 0.06em;
  color: inherit !important;
}

#message .purpose-desc {
  margin-top: 0 !important;
}

#message .closing-line {
  font-weight: 600;
}

  </style>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <div class="container header-inner">
      <a href="#intro" class="site-title">『つくる』アーカイブ</a>
      <nav aria-label="サイト内メニュー">
        <ul>
          <li><a href="#intro">成分表示</a></li>
          <li><a href="#overview">構成</a></li>
          <li><a href="#history">詳細</a></li>
          <li><a href="#products">製品</a></li>
          <li><a href="#closing">趣意</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <!-- 成分表示 -->
    <section id="intro">
      <div class="container">
        <div class="hero">
          <div class="hero-main">
            <!-- 1行目：キャッチ -->
            <p class="hero-tagline">何をやっている人？ を廻る混迷</p>
            <!-- 2行目：成分表示＋『つくる』の軌跡（横並び） -->
            <div class="hero-title-row">
              <h1>成分表示</h1>
              <div class="hero-subtitle">『つくる』の軌跡</div>
            </div>
            <div class="hero-meta">
              <div class="hero-stat">
                <div class="hero-stat-label">成分</div>
                <div class="hero-stat-value">9業種</div>
              </div>
              <div class="hero-stat">
                <div class="hero-stat-label">累計日数</div>
                <div class="hero-stat-value" id="career-span-text"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 第二部門：成分構成 -->
    <section id="overview">
      <div class="container">
        <div class="section-header">
          <p class="section-label">SECTION 01</p>
          <h2>成分構成</h2>
        </div>

        <div class="chart-layout">
          <div class="card">
            <h3>業種別 日数</h3>
            <p class="muted">各業種に携わった日数を、横方向のバーの長さで表しています。</p>
            <div class="chart-container">
              <canvas id="barChart" aria-label="業種別日数の棒グラフ" role="img"></canvas>
            </div>
          </div>

          <div class="card">
            <h3>業種別 成分割合</h3>
            <p class="muted">全期間を100％としたときの、各業種の構成比です。</p>
            <div class="chart-container">
              <canvas id="pieChart" aria-label="業種別構成比の円グラフ" role="img"></canvas>
            </div>
          </div>
        </div>

        <div class="card">
          <button class="list-toggle" id="list-toggle-btn"
            aria-expanded="false" aria-controls="list-panel">
            <span>成分一覧</span>
            <span class="list-toggle-indicator">＋</span>
          </button>

          <div id="list-panel" class="list-panel" hidden>
            <div class="table-scroll">
              <table aria-label="業種ごとの成分一覧表">
                <thead>
                  <tr>
                    <th>業種</th>
                    <th>日数</th>
                    <th>年数（概算）</th>
                    <th>割合（%）</th>
                  </tr>
                </thead>
                <tbody id="career-table-body">
                  <!-- JSで行を挿入 -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 第三部門：成分詳細 -->
    <section id="history">
      <div class="container">
        <div class="section-header">
          <p class="section-label">SECTION 02</p>
          <h2>成分詳細</h2>
          <p class="section-hint">
            ※各成分は、見出し部分をクリック／タップすると詳細が開きます。
          </p>
        </div>

        <div class="timeline">
          <!-- 洋食調理スタッフ -->
          <article id="career-food" class="timeline-item timeline-collapsible timeline-item-food timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">洋食調理スタッフ</h3>
              <p class="timeline-period">1984/4/1 〜 1991/1/31（2,496日）</p>
              <p class="timeline-meta">
                6店舗（芝生、Vert Point、CASA、銀座ライオン、BEI RUDI、LA JOLLA）
              </p>
              <p class="timeline-meta">
                バブル期飲食業界変革を経験
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                全くの素人から洋食調理全般を習得。カフェバー業態立上げをコンサルと協働。
                副業で清掃サービス事業も展開。
              </p>
              <p class="timeline-desc">
                高校卒業後デザイン専門学校を一日で退学。アルバイトニュースで見つけた未経験調理求人からスタート。
                6店舗を経験し、「でもしか商売」から専門職への業界変革を最前線で体験。
                芝生（中曽根商事）で洋食の基礎を習得、Vert Pointではカフェバー業態立上げを飲食店コンサルと協働。
                BEI RUDI勤務時には副業で清掃サービス事業を展開し、顧客から出資話も。
                調理とはものづくりであり、ここで身に付けた思考方法がその後のキャリアすべてに影響。
                バブルで業界が変容し転職を決意。
                シグマとの意外な接点として、中曽根商事にはシグマ会長／社長がコマツソフト時代に開発した店舗SOLが
                後に導入されることに。
              </p>
            </div>
          </article>

          <!-- 流通店舗向けシステム開発 -->
          <article id="career-system" class="timeline-item timeline-collapsible timeline-item-system timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">流通店舗向けシステム開発</h3>
              <p class="timeline-period">1991/2/1 〜 1995/9/30（1,702日）</p>
              <p class="timeline-meta">
                アドバンストシステムエンジニアリング（東京都千代田区）
              </p>
              <p class="timeline-meta">
                IT黎明期のベンチャー挑戦
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                未経験プログラマーから技術習得。画期的な小売店向け店舗本部間システム開発。
                AR技術の先駆け（30年!?）となる画像合成システムも手がける。
              </p>
              <p class="timeline-desc">
                子供時代からのコンピューター興味により転身。
                NCR、NEC、日電東芝出身の技術者たちと共に働く10名規模ベンチャー。
                オフコンからPC移行期を経験し、COBOL、BASICを習得。
                ネットウェーブ：小規模チェーン向け店舗本部間システム。
                まだ信頼の薄いPCでネットワーク（P2P）構築した画期的システム。
                画像合成システム：靴販売店での顧客画像と商品画像のバーチャル合成。
                画像データはレーザーディスク保存。
                営業責任者の脳梗塞により販売体制崩壊、給料未払い発生。
                経営難によりネットウェーブをカテナに売却、これが後のキャリアにもつながる布石に。
              </p>
            </div>
          </article>

          <!-- 店舗什器板金製造 -->
          <article id="career-store" class="timeline-item timeline-collapsible timeline-item-store timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">店舗什器板金製造</h3>
              <p class="timeline-period">1995/10/1 〜 2005/5/31（3,530日）</p>
              <p class="timeline-meta">
                ナビ工業（埼玉県川口市）
              </p>
              <p class="timeline-meta">
                コンビニATM革命のパイオニア
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                経営・経理以外すべてを担当。コンビニATM導入プロジェクトでIBM共同特許取得。
                現シグマ会長・社長との関係構築。
              </p>
              <p class="timeline-desc">
                前職の倒れた営業員の紹介で入社。社員数40名前後の創業社長ワンマン経営町工場。
                営業・提案・設計・製造・組立・納品・アフターフォローまで担当。
                入社当初はPOS関連特注什器製造がメインで全国の百貨店やスーパーに展開。
                その後コンビニATM事業が立ち上がり、ATM＋キャビネット（運用周辺機器内蔵）の店内設置モデルを開発しIBMと共同特許取得。
                それにより独占的シェアを獲得し、長期ビジネス化に成功。
                POSSOLを扱うSIerの営業部長・課長（現シグマ会長・社長）も当時のお客様で、ここで関係を構築。
                残業200時間超が何ヶ月も連続する労働環境だったが、すべてが学びとなり「仕事をする自分」が形成された。
                現シグマ会長がSIer退職後ナビ工業に入社し上場を目指すも、最終的に黒字清算となる。
              </p>
            </div>
          </article>

          <!-- リテールソリューション営業 -->
          <article id="career-retail" class="timeline-item timeline-collapsible timeline-item-retail timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">リテールソリューション営業</h3>
              <p class="timeline-period">2005/6/1 〜 2008/7/31（1,156日）</p>
              <p class="timeline-meta">
                カテナ株式会社（東京都江東区 : 現システナ）
              </p>
              <p class="timeline-meta">
                IBMBPとしてSOL営業展開
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                IBMビジネスパートナーとしてPOS/IT機器販売。
                廉価版POSディストリビューター責任者として全国各地のISVと協業。
              </p>
              <p class="timeline-desc">
                カテナの流通ソリューション部署部長からの誘いで転職。
                当時東証二部上場企業で、IBMの販売特約店としてPOS機器を販売。
                各種ソフトウェアを提案開発し、ソリューションとして納品。
                IBM廉価版POS機器（100万円→40万円）のディストリビューター契約を獲得し、責任者として活動。
                様々なISVと協業し、精神科売店専門POS、クリーニング、美容室、中古品販売など多業界でソリューションを立ち上げ。
                ナビ工業と重複する顧客が多く、流通店舗向けシステム開発の経験も大きく活用。
                その後IBMはアジアパシフィック地区からPOS事業撤退し東芝テックに売却。それを機に転職を決意。
                シグマ社長（現会長）から「これまでのコンビニATM導入プロジェクト知見を活かして仕事しないか？」と声掛けを受ける。
              </p>
            </div>
          </article>

          <!-- 金融機器導入スケジュール管理 -->
          <article id="career-finance" class="timeline-item timeline-collapsible timeline-item-finance timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">金融機器導入スケジュール管理</h3>
              <p class="timeline-period">2008/8/1 〜 2012/1/31（1,278日）</p>
              <p class="timeline-meta">
                個人事業主（東京都江東区 : IBM豊洲事業所他）
              </p>
              <p class="timeline-meta">
                3万件規模ATMプロジェクト統括
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                ATM導入PJTチーム一員として約3万件の導入店舗スケジュール管理を実施。
                ほとんどのコンビニATM導入に携わる。
              </p>
              <p class="timeline-desc">
                個人事業主としてIBM豊洲事業所内のプロジェクトルームに勤務。
                E-net、LANs（ローソン）関連すべて（7/11以外のほとんど）約3万件の導入店舗のスケジュール作成を統括。
                電気工事、ATM輸送経路、警備、店舗搬入、現地キッティング、現金装填まで、
                全工程の導入調整業務をほぼ一人で実施。
                非常に多くの業者間調整業務を経験し、バランスを取りマネジメントするスキルを身に付ける。
                シグマ現会長とは定期的な情報交換を実施し、信頼関係を構築。
                東日本大震災もあったが、幸い業務関連の大きな事故はなし。
                ファミリーマート大規模展開がひと段落し、プロジェクトチームメンバー見直しのタイミングで業務終了。
              </p>
            </div>
          </article>

          <!-- 木工小物製造 -->
          <article id="career-wood" class="timeline-item timeline-collapsible timeline-item-wood timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">木工小物製造</h3>
              <p class="timeline-period">2012/2/1 〜 2014/1/31（730日）</p>
              <p class="timeline-meta">
                木工ミシンてづか（東京都足立区）
              </p>
              <p class="timeline-meta">
                家庭内手工業とイノベーション
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                父の糸鋸加工業を手伝い。独自技法開発で立体組み上げ照明器具製作。
                電気用品安全法をクリアしオリジナル照明完成。
              </p>
              <p class="timeline-desc">
                ATMプロジェクト終了後、父が営む糸鋸加工業を手伝うこと（緩やかな廃業に向けた協業）を決意。
                仏壇部品から看板切り文字まで手がける家庭内手工業で、
                バブル期はそれなりに仕事があったがNCルーター等機械加工に仕事を取られ成立困難な状況。
                下請けから脱却し「自分の作品」を作り販売することを目指し「木工小物」を手掛ける。
                装飾用置物では差別化困難だったため、一枚の板から相似形複数部品を切り出し
                立体的に組み上げる独自技法を開発。
                この技法で照明器具（ランプシェード）製作にたどり着き、
                近所の照明器具メーカーと協業し電気用品安全法をクリア、オリジナル照明完成。
                その照明器具メーカーは大手電器メーカー特注照明部門の認定工場で、
                下請け脱却を目指す社長より営業部立ち上げのため入社要請をいただく。
              </p>
            </div>
          </article>

          <!-- 照明器具製造 -->
          <article id="career-light" class="timeline-item timeline-collapsible timeline-item-light timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">照明器具製造</h3>
              <p class="timeline-period">2014/2/1 〜 2019/3/31（1,884日）</p>
              <p class="timeline-meta">
                昭興電器製作所（埼玉県八潮市）
              </p>
              <p class="timeline-meta">
                企業改革とデコランタンおぢさん誕生
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                営業部立ち上げ→経営企画室長→製造部長兼任。
                大手メーカー下請脱却5年計画立案・実行。ものづくりワークショップ開発。
              </p>
              <p class="timeline-desc">
                大手電器メーカー下請脱却を目標に、営業部立ち上げから経営企画室長、
                最終的に板金製造部長兼任。
                5年計画で「売上比率既存50％ : 新規50％」の売上倍増事業計画を立案。
                大手・中堅照明メーカーとの新規取引開始、著名デザイナー案件などを実現。
                デザイナー・建築家の電気用品安全法のハードル解決を支援。
                照明に関わるものづくりワークショップ「デコランタンワークショップ」を開発。
                八潮地区で大規模ものづくりイベントを複数回開催し、
                全国規模で製造企業・ものづくりイベント団体と協力関係を構築。
                「デコランタンおぢさん」としてキャラクター化され、
                製造仲間のインフルエンサーがSNSで拡散し全国に知られる。
                しかし本業を振り返れば、数十年大手の傘に守られた社員のマインド変更は困難で、
                営業部は事実上解散。社内既存勢力との権力抗争に敗れ、
                5年計画未達で退職。
                「デコランタンワークショップ」は退職後も個人コンテンツとして継続。
              </p>
            </div>
          </article>

          <!-- 自動車カスタムパーツデザイン製造 -->
          <article id="career-auto" class="timeline-item timeline-collapsible timeline-item-auto timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">自動車カスタムパーツデザイン製造</h3>
              <p class="timeline-period">2019/4/1 〜 2021/9/10（893日）</p>
              <p class="timeline-meta">
                株式会社フォリオデザイン（千葉県野田市）
              </p>
              <p class="timeline-meta">
                デザインと製造の統合体験
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                FRP・カーボン外装部品製造に挑戦。デザイン工程から製造まで一貫体験。
                DAS関連でIT機器取付パーツ開発。
              </p>
              <p class="timeline-desc">
                自動車外装部品やプロダクトデザインを手掛けるデザインオフィスで、
                社長がデザイン、私が製造を担当。
                スポーツタイプから高級車まで、FRPやカーボンを利用したカスタムパーツを手掛ける。
                樹脂加工は初挑戦だったが、これまでの加工経験が活きる。
                デザイン工程から製造まで一貫で扱う環境で、
                「少しデザインに近づけた気がした」貴重な体験となる。
                様々な製造に関わってきたが、製造業の根幹ともいえる自動車産業に
                思わぬ形で関われて良かった。
                その他、デジタルアソートシステム（DAS）関連や倉庫内専用カート、
                IT機器取付パーツを開発し作業効率化に携わる。
                しかしコロナ禍が事業を直撃。
                昭興時代から継続していたシグマからの声掛けもあり転職を決断。
              </p>
            </div>
          </article>

          <!-- A-Zen -->
          <article id="career-azen" class="timeline-item timeline-collapsible timeline-item-azen timeline-item-accent">
            <div class="timeline-header">
              <h3 class="timeline-title">A-Zen</h3>
              <p class="timeline-period" id="azen-period">
                <!-- JSで 2021/9/11 〜 サイト訪問日（xxxxx日） を挿入 -->
              </p>
              <p class="timeline-meta">
                シグマソフトサービス株式会社（東京都中央区）
              </p>
              <p class="timeline-meta">
                キャリア集大成：全経験統合
              </p>
              <div class="timeline-indicator">＋</div>
            </div>
            <div class="timeline-body" hidden>
              <p class="timeline-desc">
                A-Zen部署を立ち上げ。「店舗まるごと整える！」をスローガンにサービス開始。
                四十数年間の知識・経験・人脈すべてを活用。
              </p>
              <p class="timeline-desc">
                新規事業としてA-Zenサービスを運営。
                「店舗まるごと整える！」をスローガンに、
                ITサポート＋店舗什器のお困りごと解決サービスを提供。
                什器や設備の（提案／製造を含めた）営繕を請け負い、
                大手什器メーカーが対応できない細かなカスタマイズなどに対応。
                これまで携わってきた外食・システム・製造などの知識・経験・人脈など
                すべてが活かされ、現在・過去の経験がマージされ、
                個別に切り分けて評価するのが難しいほど統合されている。
                ナビ工業時代に会長と面接採用した製造責任者を、
                A-Zenスタッフとして迎え入れる。
              </p>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- 第四部門：製品 -->
    <section id="products">
      <div class="container">
        <div class="section-header">
          <p class="section-label">SECTION 03</p>
          <h2>製品</h2>
        </div>

        <div class="grid-products">
          <!-- 基本理念 -->
          <article class="card product-card">
            <h3>
              基本理念
              <span class="product-note">(戒めとして)</span>
            </h3>
              <p>
                謙虚に真摯に<br>
                常に新鮮であり続ける<br>
               <span class="tagline-like">Like a California Roll</span>
            </p>
          </article>

          <!-- カリフォルニアロール理論（クリックで作文展開） -->
          <article class="card product-card product-card-collapsible" id="california-roll">
            <div class="product-header">
              <h3>Like a California Roll</h3>
              <p>
                カリフォルニアロールのような仕事をしてきました。<br>
                本道ではないが味がある、異なるアプローチでも同じ価値を創造する仕事です。
                <span class="toggle-hint">（クリック／タップで全文を表示）</span>
              </p>
              <div class="product-indicator">＋</div>
            </div>
            <div class="product-body" hidden>
              <p class="product-body-title">
                カリフォルニアロール<br>
                或いはナポリタンという「ものづくり」について
              </p>
              <p>
                何十年も前、私が町工場で働いていたころの話です。<br>
                当時お付き合いのあった、世界の巨人と呼ばれていた企業の営業責任者から、こんな言葉を浴びせられました。
              </p>
              <p>
                「お前らと俺たちを一緒にするな！<br>
                お前らの描いているのは図面なんて呼べるものじゃない。<br>
                やっていることは製造ってレベルじゃない。<br>
                俺たちが生きているのは、そんなぬるい世界じゃないんだ。」
              </p>
              <p>
                じゃあ、なぜ私たちにものづくりを依頼するのか。<br>
                安いからだけ？　でも世の中に出すときは、自分たちの銘板をしっかり貼っている。<br>
                鼓舞してくれているのか、育てようとしているのか、あるいは愛なのか。
              </p>
              <p>
                いろいろな思いが頭をよぎりつつも、「言われていることは現実だな」とも感じました。<br>
                たしかに意識もレベルも低く、見えている世界も違う。そう言われても仕方がなかったのかもしれません。
              </p>
              <p>
                あのときは本当に混乱しました。いまでも忘れられない言葉です。<br>
                ただ、あれから長く仕事に携わるうちに、仕事の捉え方も少しずつ変化していきました。
              </p>

              <div class="product-divider"></div>

              <p>
                いわゆるグローバル規模のものづくりの世界では、「大規模」であることが圧倒的に支持されます。<br>
                けれど、ものづくりを料理にたとえるとどうでしょうか。
              </p>
              <p>
                好きなレストランの一皿<br>
                実家で並ぶいつもの食事<br>
                家に帰って食べるごはん<br>
                腹が減って急いでさっと作る飯
              </p>
              <p>
                どれも決して大規模ではないけれど「美味しい」はそこにちゃんとあります。<br>
                結局のところ、美味しいは正義です。
              </p>
              <p>
                大きなものづくりにも、小さなものづくりにも、それぞれ「自分が信じる絶対」や「自分なりの真ん中」という正義があります。<br>
                慢心はもちろん論外ですが、誰もが「良いものを作りたい」「美味しいものを届けたい」と思っているはずです。<br>
                だからこそ、お互いをリスペクトし合えるといいな、と私は感じています。
              </p>

              <div class="product-divider"></div>

              <p>
                私が昔やっていた料理は、「洋食」と呼ばれるものでした。<br>
                カテゴリーで言えば、フランス、中華、和食、イタリア……といった本流のどれでもなく、<br>
                どこかに似ていて、どこにも属さない亜流の世界です。<br>
                ある意味、町工場のものづくりにも似た立ち位置かもしれません。
              </p>
              <p>
                ここで、少し分かりやすい例に置き換えて話を進めます。
              </p>
              <p>
                寿司が世界に広まり、アメリカでは「カリフォルニアロール」が生まれました。<br>
                同世代の方は、その誕生や広がりをリアルタイムで見ていたと思います。
              </p>
              <p>
                当時の日本では、寿司職人はおろか、多くの日本人がそれを笑いました。<br>
                蟹かと思ったらカニカマ、胡瓜かと思ったらアボカド。海苔はなぜか内側に巻き、外にはごまがふってある。<br>
                「そんなん寿司じゃねぇだろう」と。ナポリタンなんてものを当たり前に食べているくせに！です。
              </p>
              <p>
                実はこのカリフォルニアロールこそ、私自身のものづくりそのものだと思っています。<br>
                いつも本道ではなかったし、本家から見れば認められにくい存在です。<br>
                それでも、「美味しいカリフォルニアロールを食べたい」と思ってくれるお客さまは、たしかにいるのです。
              </p>

              <div class="product-divider"></div>

              <p>
                私は、料理というものづくりから始まり、製造と呼ばれるさまざまな仕事まで、ずっと亜流の道を歩んできました。<br>
                それでも、自分なりに真摯にものづくりと向き合ってきたつもりです。
              </p>
              <p>
                あのお客さまの言葉に激しく揺さぶられた日があって、いまではこうした例えばなしとして語れるようになりました。
              </p>
              <p>
                仕事には「端っこ」も「片隅」もありません。<br>
                私たちが立っている場所こそが、いつだって自分たちの世界の真ん中です。<br>
                そして、私たちのまわりは、いつもものづくりであふれています。
              </p>
              <p>
                これからも、私なりのカリフォルニアロールを真剣に作り続けていきます。<br>
                もし、いつもの味に少し飽きてしまったり、正攻法だけでは解けない壁にぶつかったときは、<br>
                たまには脇道にそれて、私に声を掛けてください。
              </p>
              <p class="product-body-emphasis">
                美味しいカリフォルニアロールを用意して、お待ちしております。
              </p>
            </div>
          </article>

          <!-- 活動・興味・関心 -->
          <article class="card product-card" id="activities">
            <h3>活動・興味・関心</h3>
            <ul>
              <li>店舗まるごと整える！</li>
              <li>デコランタンワークショップ（ものづくりWS）を開催する</li>
              <li>楽しく美味しく飲み食べる</li>
              <li>銭湯に浸かる</li>
              <li>製造やアートの展示や現場に行く</li>
              <li>気になるイベントに参加する</li>
              <li>ランニングという名の徘徊をする</li>
            </ul>
          </article>
        </div>
      </div>
    </section>
  </main>
<!-- SECTION 04: メッセージ -->
<section id="closing">
  <div class="container">
    <div class="section-header">
      <p class="section-label">SECTION 04</p>
      <h2>趣意</h2>
    </div>

    <article class="card product-card" id="message">
      <h3>みなさんへ</h3>

      <p class="purpose-main">『つくる』で 暮らしを しなやかにする</p>
      <p class="purpose-sub-en">Imagining and Creating Better Days</p>

      <p class="purpose-desc">
        しなやかとは、柔らかくて芯があり、状況に応じてかたちを変えながら続いていくあり方のことです。
        しなやかさは、物や身体、心など私たちを形づくるあらゆるものに宿り、日々の小さな豊かさにつながっています。
        私にとっての『つくる』は、そのしなやかさを暮らしのそばで想像し創造へとつなげていく imagineering です。
      </p>

      <p>
        長年積み重ねてきた知識や経験、人とのつながりを手がかりに、新しいプロジェクトやアイデアがほどよく形になるようお手伝いできればうれしく思います。
      </p>

      <p>
        ここまで読んでみても、結局「何をやっている人」なのかは、つかめなかったかもしれません。
        それでも、どこかひとつでも気になる成分がありましたら、どうぞ気軽に声をかけてみてください。
      </p>

      <p class="closing-line">またお会いしましょう</p>
    </article>
  </div>
</section>

  <!-- フッター -->
  <footer>
    © 2025 成分表示 - 『つくる』アーカイブ. All rights reserved.
  </footer>

  <!-- 日付計算・グラフ描画用スクリプト -->
  <script>
    function calculateSpan(startY, startM, startD) {
      const start = new Date(startY, startM - 1, startD);
      const now = new Date();
      const end = new Date(now.getFullYear(), now.getMonth(), now.getDate());

      let years = end.getFullYear() - start.getFullYear();
      let months = end.getMonth() - start.getMonth();
      let days = end.getDate() - start.getDate();

      if (days < 0) {
        months -= 1;
        const prevMonthEnd = new Date(end.getFullYear(), end.getMonth(), 0);
        days += prevMonthEnd.getDate();
      }

      if (months < 0) {
        years -= 1;
        months += 12;
      }

      const totalDays = Math.round((end - start) / (1000 * 60 * 60 * 24));
      return { years, months, days, totalDays, end };
    }

    function convertDaysToYM(days) {
      const years = Math.floor(days / 365);
      const remaining = days % 365;
      const months = Math.floor(remaining / 30);
      return { years, months };
    }

    function formatDate(d) {
      const y = d.getFullYear();
      const m = d.getMonth() + 1;
      const day = d.getDate();
      return y + "/" + m + "/" + day;
    }

    document.addEventListener("DOMContentLoaded", function () {
      const careerSpan = calculateSpan(1984, 4, 1);
      const careerSpanTextEl = document.getElementById("career-span-text");
      if (careerSpanTextEl) {
        careerSpanTextEl.textContent =
          careerSpan.totalDays.toLocaleString() + "日（" +
          careerSpan.years + "年" +
          careerSpan.months + "ヶ月" +
          careerSpan.days + "日）";
      }

      const azenSpan = calculateSpan(2021, 9, 11);
      const azenPeriodEl = document.getElementById("azen-period");
      if (azenPeriodEl) {
        azenPeriodEl.textContent =
          "2021/9/11 〜 " +
          formatDate(azenSpan.end) +
          "（" + azenSpan.totalDays.toLocaleString() + "日）";
      }

      const labels = [
        "洋食調理スタッフ",
        "流通店舗向けシステム開発",
        "店舗什器板金製造",
        "リテールソリューション営業",
        "金融機器導入スケジュール管理",
        "木工小物製造",
        "照明器具製造",
        "自動車カスタムパーツデザイン製造",
        "A-Zen"
      ];

      const baseDays = [
        2496,
        1702,
        3530,
        1156,
        1278,
        730,
        1884,
        893
      ];

      const azenDays = azenSpan.totalDays;

      const entries = labels.map((label, index) => ({
        label,
        days: index < baseDays.length ? baseDays[index] : azenDays
      }));

      const totalDaysAll = entries.reduce((sum, e) => sum + e.days, 0);

      const baseColors = [
        "#38bdf8",
        "#a855f7",
        "#f97316",
        "#22c55e",
        "#e11d48",
        "#facc15",
        "#0ea5e9",
        "#8b5cf6",
        "#f97373"
      ];

      const colorByLabel = {};
      entries.forEach((e, index) => {
        colorByLabel[e.label] = baseColors[index];
      });

      const detailIdsByLabel = {
        "洋食調理スタッフ": "career-food",
        "流通店舗向けシステム開発": "career-system",
        "店舗什器板金製造": "career-store",
        "リテールソリューション営業": "career-retail",
        "金融機器導入スケジュール管理": "career-finance",
        "木工小物製造": "career-wood",
        "照明器具製造": "career-light",
        "自動車カスタムパーツデザイン製造": "career-auto",
        "A-Zen": "career-azen"
      };

      const sortedEntries = [...entries].sort((a, b) => b.days - a.days);
      const pieLabels = sortedEntries.map(e => e.label);
      const pieDays = sortedEntries.map(e => e.days);
      const piePercentages = pieDays.map(d => d / totalDaysAll * 100);
      const pieColors = pieLabels.map(label => colorByLabel[label]);

      const barLabels = entries.map(e => e.label);
      const barDays = entries.map(e => e.days);
      const barColors = barLabels.map(label => colorByLabel[label]);

      const barCtx = document.getElementById("barChart");
      if (barCtx && window.Chart) {
        new Chart(barCtx.getContext("2d"), {
          type: "bar",
          data: {
            labels: barLabels,
            datasets: [{
              label: "日数",
              data: barDays,
              backgroundColor: barColors,
              borderColor: barColors,
              borderWidth: 1.2,
              borderRadius: 4
            }]
          },
          options: {
            indexAxis: "y",
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: { display: false },
              tooltip: {
                callbacks: {
                  label: function (context) {
                    const value = context.raw;
                    return value.toLocaleString() + " 日";
                  }
                }
              }
            },
            scales: {
              x: {
                ticks: {
                  color: "#4b5563",
                  callback: value => value.toLocaleString()
                },
                grid: { color: "rgba(209, 213, 219, 0.8)" },
                title: {
                  display: true,
                  text: "日数",
                  color: "#111827"
                }
              },
              y: {
                ticks: {
                  autoSkip: false,
                  color: "#111827"
                },
                grid: { color: "rgba(229, 231, 235, 0.9)" }
              }
            }
          }
        });
      }

      const pieCtx = document.getElementById("pieChart");
      if (pieCtx && window.Chart) {
        new Chart(pieCtx.getContext("2d"), {
          type: "doughnut",
          data: {
            labels: pieLabels,
            datasets: [{
              data: piePercentages,
              backgroundColor: pieColors,
              borderColor: "#ffffff",
              borderWidth: 1.4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            rotation: -0.25 * Math.PI,
            plugins: {
              tooltip: {
                callbacks: {
                  label: function (context) {
                    const label = context.label || "";
                    const value = context.raw;
                    return label + "： " + value.toFixed(1) + " %";
                  }
                }
              },
              legend: {
                position: "bottom",
                labels: {
                  color: "#111827",
                  boxWidth: 16
                }
              }
            },
            cutout: "55%"
          }
        });
      }

      const tbody = document.getElementById("career-table-body");
      if (tbody) {
        entries.forEach(e => {
          const ym = convertDaysToYM(e.days);
          const percentage = e.days / totalDaysAll * 100;
          const tr = document.createElement("tr");
          const color = colorByLabel[e.label];
          const detailId = detailIdsByLabel[e.label];

          let labelCellHtml = "";
          if (detailId) {
            labelCellHtml =
              "<a href=\"#" + detailId + "\" class=\"career-link\">" +
                "<span class=\"career-color-dot\" style=\"background:" + color + ";\"></span>" +
                e.label +
              "</a>";
          } else {
            labelCellHtml =
              "<span class=\"career-color-dot\" style=\"background:" + color + ";\"></span>" +
              e.label;
          }

          tr.innerHTML =
            "<td>" + labelCellHtml + "</td>" +
            "<td>" + e.days.toLocaleString() + " 日</td>" +
            "<td>" + ym.years + "年" + ym.months + "ヶ月（概算）</td>" +
            "<td>" + percentage.toFixed(1) + " %</td>";
          tbody.appendChild(tr);
        });
      }

      const toggleBtn = document.getElementById("list-toggle-btn");
      const listPanel = document.getElementById("list-panel");
      if (toggleBtn && listPanel) {
        const indicator = toggleBtn.querySelector(".list-toggle-indicator");
        toggleBtn.addEventListener("click", () => {
          const isHidden = listPanel.hasAttribute("hidden");
          if (isHidden) {
            listPanel.removeAttribute("hidden");
            toggleBtn.setAttribute("aria-expanded", "true");
            if (indicator) indicator.textContent = "−";
          } else {
            listPanel.setAttribute("hidden", "");
            toggleBtn.setAttribute("aria-expanded", "false");
            if (indicator) indicator.textContent = "＋";
          }
        });
      }

      document.querySelectorAll(".timeline-collapsible").forEach(item => {
        const header = item.querySelector(".timeline-header");
        const body = item.querySelector(".timeline-body");
        const indicator = item.querySelector(".timeline-indicator");
        if (!header || !body) return;

        header.setAttribute("tabindex", "0");

        const toggle = () => {
          const isHidden = body.hasAttribute("hidden");
          if (isHidden) {
            body.removeAttribute("hidden");
            item.classList.add("is-open");
            if (indicator) indicator.textContent = "−";
          } else {
            body.setAttribute("hidden", "");
            item.classList.remove("is-open");
            if (indicator) indicator.textContent = "＋";
          }
        };

        header.addEventListener("click", toggle);
        header.addEventListener("keydown", e => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            toggle();
          }
        });
      });

      document.querySelectorAll(".product-card-collapsible").forEach(card => {
        const header = card.querySelector(".product-header");
        const body = card.querySelector(".product-body");
        const indicator = card.querySelector(".product-indicator");
        if (!header || !body) return;

        header.setAttribute("tabindex", "0");

        const toggle = () => {
          const isHidden = body.hasAttribute("hidden");
          if (isHidden) {
            body.removeAttribute("hidden");
            card.classList.add("is-open");
            if (indicator) indicator.textContent = "−";
          } else {
            body.setAttribute("hidden", "");
            card.classList.remove("is-open");
            if (indicator) indicator.textContent = "＋";
          }
        };

        header.addEventListener("click", toggle);
        header.addEventListener("keydown", e => {
          if (e.key === "Enter" || e.key === " ") {
            e.preventDefault();
            toggle();
          }
        });
      });

      document.querySelectorAll(".card, .timeline-item, .hero-main").forEach(el => {
        el.classList.add("fade-in-up");
      });

      if ("IntersectionObserver" in window) {
        const observer = new IntersectionObserver((entries, obs) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add("is-visible");
              obs.unobserve(entry.target);
            }
          });
        }, { threshold: 0.15 });

        document.querySelectorAll(".fade-in-up").forEach(el => observer.observe(el));
      } else {
        document.querySelectorAll(".fade-in-up").forEach(el => {
          el.classList.add("is-visible");
        });
      }
    });
  </script>
</body>
</html>
